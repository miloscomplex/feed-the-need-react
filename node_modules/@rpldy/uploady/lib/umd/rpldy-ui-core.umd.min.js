/*! For license information please see rpldy-ui-core.umd.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.rpldy=t(require("react"),require("react-dom")):e.rpldy=t(e.react,e["react-dom"])}(self,(function(e,t){return function(){var n,r={SKjz:function(e,t,n){"use strict";n.d(t,{uZ:function(){return R},ZP:function(){return A}});var r=n("P2gF"),o=(0,r.ZV)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1});const i=(e,t)=>{if(!(0,r.mf)(e))throw new Error(`'${t}' is not a valid function`)},a=e=>void 0===e,s=Symbol.for("__le__"),u=Symbol.for("__le__pack__"),c=e=>e?e[s]:null,l=e=>{const t=c(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},d=e=>!!c(e),f=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(n,"cb");const o=l(e);if(!o.options.allowRegisterNonExistent&&!~o.events.indexOf(t))throw new Error(`Cannot register for event ${t.toString()} that wasn't already defined (allowRegisterNonExistent = false)`);const a=o.registry[t]||[];return a.find((e=>e.cb===n))||(a.push({name:t,cb:n,once:r}),o.registry[t]=a),()=>y.call(e,t,n)},p=(e,t)=>{const n=l(e).registry;return t?n[t]?n[t].slice():[]:Object.values(n).flat()},h={on:function(e,t){return f(this,e,t)},once:function(e,t){return f(this,e,t,!0)},off:y,getEvents:function(){return l(this).events.slice()}},g=()=>Object.entries(h).reduce(((e,t)=>{let[n,r]=t;return e[n]={value:r},e}),{}),m={trigger:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const i=p(this,e);let s;if(i.length){var c;let t;1===n.length&&!0===(null===(c=n[0])||void 0===c?void 0:c[u])&&(t=n[0].resolve()),s=i.map((r=>{let o;return r.once&&v(this,e,r.cb),o=t?r.cb(...t):n.length?1===n.length?r.cb(n[0]):2===n.length?r.cb(n[0],n[1]):3===n.length?r.cb(n[0],n[1],n[2]):r.cb(...n):r.cb(),o})).filter((e=>!a(e))).map((e=>(0,r.tI)(e)?e:Promise.resolve(e)))}return s&&(s.length?s:void 0)},addEvent:function(e){const t=l(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");if(~t.events.indexOf(e))throw new Error(`Event '${e}' already defined`);t.events.push(e)},removeEvent:function(e){const t=l(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");{const n=t.events.indexOf(e);t.events.splice(n,1)}},hasEvent:function(e){return!!~l(this).events.indexOf(e)},hasEventRegistrations:function(e){return!!p(this,e).length},assign:function(e){const t=l(this);return S(e,t.options,t.events,t.registry,t.stats),b(e)}},b=e=>Object.keys(m).reduce(((t,n)=>(t[n]=m[n].bind(e),t)),{target:e,...m}),E=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=l(e).registry;!r[t]||!n&&r[t].length||delete r[t]},v=(e,t,n)=>{const r=l(e).registry;r[t]&&(n?(r[t]=r[t].filter((e=>e.cb!==n)),E(e,t)):E(e,t,!0))};function y(e,t){v(this,e,t)}const S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Object.defineProperties(e,{[s]:{value:Object.seal({registry:r,events:n,options:t,stats:o})},...g()})};var A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return e=e||{},n={...o,...n},d(e)||S(e,n,t),b(e)},R=e=>{const t={resolve:()=>[].concat(e())};return Object.defineProperty(t,u,{value:!0,configurable:!1}),t}},Vmq3:function(e,t,n){"use strict";n.d(t,{PF:function(){return i},Ch:function(){return o},ZP:function(){return p},KZ:function(){return d},lW:function(){return f}});var r=n("P2gF");const o="rpldy-sender";class i extends Error{constructor(e){super(`${e} didn't receive upload URL`),this.name="MissingUrlError"}}const a=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];"set"in e?e.set(t,...r):("delete"in e&&e.delete(t),e.append(t,...r))};const s=[200,201,202,203,204],u=(e,t,n,o,i)=>{let s;const u=null!=i&&i.getRequestData?i.getRequestData(e,n):((e,t)=>{let n;if(t.sendWithFormData)r.kg.debugLog(`uploady.sender: sending ${e.length} item(s) as form data`),n=((e,t)=>{const n=new FormData;return t.params&&Object.entries(t.params).forEach((e=>{let[r,o]=e;(t.formDataAllowUndefined||void 0!==o)&&a(n,r,o)})),((e,t,n)=>{const o=1===t.length;t.forEach(((t,i)=>{const s=o?n.paramName:(0,r.mf)(n.formatGroupParamName)?n.formatGroupParamName(i,n.paramName):`${n.paramName}[${i}]`;t.file?a(e,s,t.file,t.file.name):t.url&&a(e,s,t.url)}))})(n,e,t),n})(e,t);else{if(e.length>1)throw new Error(`XHR Sender - Request without form data can only contain 1 item. received ${e.length}`);const t=e[0];r.kg.debugLog(`uploady.sender: sending item ${t.id} as request body`),n=t.file||t.url}return n})(e,n),c=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,c=arguments.length>2?arguments[2]:void 0;c=(0,r.TS)({...(0,r.ei)(n,["method","headers","withCredentials"]),preSend:t=>{t.upload.onprogress=t=>{t.lengthComputable&&o&&o(t,e.slice())}}},c);const l=(0,r.WY)(i,a,c);return s=l.xhr,l},l=null!=i&&i.preRequestHandler?i.preRequestHandler(c,e,t,n,o,i):c();return{url:t,count:e.length,pXhr:l,getXhr:()=>s,aborted:!1}},c=(e,t,n)=>{let r=e;const o=null==t?void 0:t["content-type"];if(n.forceJsonResponse||null!=o&&o.includes("json"))try{r=JSON.parse(e)}catch{}return r},l=(e,t)=>e.pXhr.then((e=>(r.kg.debugLog("uploady.sender: received upload response ",e),((e,t)=>{const n=t.isSuccessfulCall?t.isSuccessfulCall(e):s.includes(e.status);return(0,r.tI)(n)?n:Promise.resolve(n)})(e,t).then((n=>{var o,i;const a=n?r.FD.FINISHED:r.FD.ERROR,s=e.status,u=(0,r.k7)(e);return{status:s,state:a,response:{data:null!==(o=null===(i=t.formatServerResponse)||void 0===i?void 0:i.call(t,e.response,s,u))&&void 0!==o?o:c(e.response,u,t),headers:u}}}))))).catch((t=>{let n,o;return e.aborted?(n=r.FD.ABORTED,o="aborted"):(r.kg.debugLog("uploady.sender: upload failed: ",t),n=r.FD.ERROR,o=t),{error:!0,state:n,response:o,status:0}}));var d=e=>(t,n,a,s)=>{if(!n)throw new i(o);r.kg.debugLog("uploady.sender: sending file: ",{items:t,url:n,options:a});const c=u(t,n,a,s,e);return{request:l(c,a),abort:()=>(e=>{let t=!1;const{aborted:n,getXhr:o}=e,i=o();return!n&&i&&i.readyState&&4!==i.readyState&&(r.kg.debugLog(`uploady.sender: cancelling request with ${e.count} items to: ${e.url}`),i.abort(),e.aborted=!0,t=!0),t})(c),senderType:o}};const f=d();var p=f},P2gF:function(e,t,n){"use strict";n.d(t,{FG:function(){return c},FD:function(){return l},d9:function(){return U},Yc:function(){return I},ZV:function(){return L},D8:function(){return k},Ym:function(){return d},kG:function(){return i()},mf:function(){return P()},PO:function(){return B},yv:function(){return F()},tI:function(){return j},sQ:function(){return w},kg:function(){return r},TS:function(){return G},k7:function(){return T},ei:function(){return x},WY:function(){return D},P2:function(){return s()},tq:function(){return m},sc:function(){return E}});var r={};n.r(r),n.d(r,{debugLog:function(){return g},isDebugOn:function(){return p},setDebug:function(){return h}});var o=n("kvau"),i=n.n(o),a=n("uDTZ"),s=n.n(a);const u="__rpldy-logger-debug__",c={PENDING:"pending",ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted",ERROR:"error"},l={PENDING:"pending",ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"};var d=()=>"object"==typeof window&&!!window.document;let f;const p=()=>("boolean"!=typeof f&&(f=d()&&("location"in window&&!!~window.location.search.indexOf("rpldy_debug=true")||!0===window[u])),!!f),h=e=>{d()&&(window[u]=e),f=!!e||null},g=function(){p()&&console.log(...arguments)};var m=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise(((n,o)=>{const i=e(t,...r);i&&i.length?Promise.all(i).catch(o).then((e=>e&&n(!!~e.findIndex((e=>!1===e))))):n(!1)}))};for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t?n(t,...o):n};const b=e=>null==e;var E=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise(((n,o)=>{const i=e(t,...r);i&&i.length?Promise.all(i).catch(o).then((e=>{let t;if(e)for(;b(t)&&e.length;)t=e.pop();n(b(t)?void 0:t)})):n()}))};for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t?n(t,...o):n};const v=Symbol.for("__rpldy-bi__");let y=0;const S=(e,t)=>(e.url=t,e),A=(e,t)=>(e.file=t,e),R=e=>e&&(e instanceof File||e instanceof Blob||"object"==typeof e&&e.name&&e.type);var I=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y+=e.id&&e.batchId?0:1;const r=e.id&&e.batchId?e.id:`${t}.item-${y}`,o=n?l.PENDING:l.ADDED;let i={id:r,batchId:t,state:o,uploadStatus:0,completed:0,loaded:0,recycled:!1,previousBatch:null};if(Object.defineProperty(i,v,{value:!0,writable:!0}),"object"==typeof e&&!0===e[v]&&(i.recycled=!0,i.previousBatch=e.batchId,e=e.file||e.url),"string"==typeof e)i=S(i,e);else{if(!R(e))throw new Error("Unknown type of file added: "+typeof e);i=A(i,e)}return i};const O=(e,t)=>{t&&Object.keys(t).forEach((n=>{void 0!==t[n]&&e.setRequestHeader(n,t[n])}))};var T=e=>{let t;try{t=e.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}catch(t){g("uploady.request: failed to read response headers",e)}return t},D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new XMLHttpRequest,o=new Promise(((o,i)=>{r.onerror=()=>i(r),r.ontimeout=()=>i(r),r.onabort=()=>i(r),r.onload=()=>o(r),r.open(n.method||"GET",e),O(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(t)}));return o.xhr=r,o},C=n("wfJ/"),P=n.n(C),w=(e,t,n)=>{let r=!0;const o=(e=>{const t=[].concat(e);return e=>e.map((e=>t.map((t=>e[t])).join()))})(n);if(e&&t&&e.length===t.length){const n=o(e),i=o(t);r=!!n.find(((e,t)=>e!==i[t]))}return!r},_=n("hSSe"),F=n.n(_),L=e=>F()()?e:Object.freeze(e),B=e=>{var t;return!!e&&"object"==typeof e&&("Object"===(null===(t=Object.getPrototypeOf(e))||void 0===t?void 0:t.constructor.name)||null===Object.getPrototypeOf(e))};const N=e=>B(e)||Array.isArray(e),H=(e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n&&o.length&&o.forEach((r=>{r&&H(r,e).forEach((o=>{const i=r[o];e.predicate&&!e.predicate(o,i)||(void 0!==i||e.undefinedOverwrites)&&(N(i)?(void 0!==n[o]&&B(n[o])||(n[o]=Array.isArray(i)?[]:{}),t(n[o],i)):n[o]=i)}))})),n};return t};var G=k(),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return N(e)?t(Array.isArray(e)?[]:{},e):e},x=(e,t)=>e&&Object.keys(e).reduce(((n,r)=>(~t.indexOf(r)&&(n[r]=e[r]),n)),{}),j=e=>!!e&&"object"==typeof e&&"function"==typeof e.then},"wfJ/":function(e){e.exports=function(e){return"function"==typeof e}},hSSe:function(e){e.exports=function(){return!0}},"1P8H":function(e,t,n){"use strict";n.d(t,{FG:function(){return o.FG},WN:function(){return z},FD:function(){return o.FD},PF:function(){return Z.PF},tY:function(){return h},Ch:function(){return Z.Ch},fZ:function(){return re},_s:function(){return ne},ZP:function(){return oe},KZ:function(){return Z.KZ},lW:function(){return Z.lW}});var r=n("SKjz"),o=n("P2gF");const i=Symbol.for("__rpldy-sstt-proxy__"),a=Symbol.for("__rpldy-sstt-state__"),s=e=>!(0,o.yv)()&&!!e&&!!~Object.getOwnPropertySymbols(e).indexOf(i),u=e=>Array.isArray(e)||(0,o.PO)(e)&&!(e=>(0,o.Ym)()&&e instanceof File||e.name&&e.size&&e.uri)(e),c=(0,o.D8)({withSymbols:!0,predicate:e=>e!==i&&e!==a}),l=e=>!!(0,o.yv)()||e[a].isUpdateable,d=(e,t)=>{(0,o.yv)()||(e[a].isUpdateable=t)},f=(e,t)=>{let n;return u(e)&&(s(e)||(e[i]=!0,n=new Proxy(e,t)),Object.keys(e).forEach((n=>{e[n]=f(e[n],t)}))),n||e},p=e=>s(e)?(0,o.d9)(e,c):e;const h=(0,o.ZV)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",BATCH_ERROR:"BATCH-ERROR",BATCH_FINALIZE:"BATCH-FINALIZE",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),g=(0,o.ZV)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),m=[o.FD.FINISHED,o.FD.ERROR,o.FD.CANCELLED,o.FD.ABORTED],b=(0,o.D8)({undefinedOverwrites:!0}),E=(e,t,n,r,i,a)=>{const s=n(t),u=e.getState().batches[s[0].batchId].batchOptions,c=(null==r?void 0:r(t,u))||t;return((e,t,n,r,i,a)=>(0,o.sc)(e.trigger,i,t,r).then((e=>(null==a||a(e),((e,t,n,r)=>{if(r){if(o.kg.debugLog(`uploader.queue: REQUEST_PRE_SEND(${e}) event returned updated items/options`,r),r.items){if(r.items.length!==t.length||!(0,o.sQ)(r.items,t,["id","batchId","recycled"]))throw new Error(`REQUEST_PRE_SEND(${e}) event handlers must return same items with same ids`);t=r.items}r.options&&(n=b({},n,r.options))}return{items:t,options:n,cancelled:!1===r}})(i,n,r,e)))))(e,c,s,u,a,i).then((t=>(t.cancelled||((e,t)=>{e.updateState((e=>{t.items.forEach((t=>{e.items[t.id]=t})),e.batches[t.items[0].batchId].batchOptions=t.options}));const n=e.getState();t.items=t.items.map((e=>n.items[e.id])),t.options=n.batches[t.items[0].batchId].batchOptions})(e,t),t)))},v=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(o,i)=>E(o,i,t,n,r,e)},y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.getState(),o=r.itemQueue.indexOf(t);~o&&e.updateState((e=>{n&&delete e.items[t],e.itemQueue.splice(o,1);const r=e.activeIds.indexOf(t);~r&&e.activeIds.splice(r,1)}))},S=(e,t,n)=>e.getState().items[t].batchId===n,A=v(h.BATCH_START,(e=>e.items),null,(function(){let{batch:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)throw new Error("BATCH_START event handlers cannot update batch data. Only items & options")})),R=[o.FG.ADDED,o.FG.PROCESSING,o.FG.UPLOADING],I=[o.FG.ABORTED,o.FG.CANCELLED,o.FG.FINISHED,o.FG.ERROR],O=(e,t)=>e.batches[t].batch,T=(e,t)=>{const n=e.getState(),r=n.items[t];return n.batches[r.batchId]},D=(e,t)=>T(e,t).batch,C=(e,t)=>{const n=((e,t)=>O(e.getState(),t))(e,t);n.items.forEach((t=>{let{id:n}=t;return y(e,n,!0)}))},P=(e,t)=>{e.updateState((e=>{delete e.batches[t]}))},w=(e,t,n)=>{_(e,t,n),_(e,t,h.BATCH_FINALIZE)},_=(e,t,n)=>{const r=e.getState(),o=O(r,t),i=r.items,a={...p(o),items:o.items.map((e=>{let{id:t}=e;return p(i[t])}))};e.trigger(n,a)},F=(e,t)=>{const n=D(e,t);return R.includes(n.state)},L=e=>I.includes(e.state),B={[o.FD.PENDING]:null,[o.FD.ADDED]:h.ITEM_START,[o.FD.FINISHED]:h.ITEM_FINISH,[o.FD.ERROR]:h.ITEM_ERROR,[o.FD.CANCELLED]:h.ITEM_CANCEL,[o.FD.ABORTED]:h.ITEM_ABORT,[o.FD.UPLOADING]:h.ITEM_PROGRESS},N=e=>!!~m.indexOf(e.state);var H=(e,t,n)=>{t.forEach((t=>{const n=e.getState(),{id:r,info:i}=t;if(o.kg.debugLog("uploader.processor.queue: request finished for item - ",{id:r,info:i}),n.items[r]){e.updateState((e=>{const t=e.items[r];t.state=i.state,t.uploadResponse=i.response,t.uploadStatus=i.status,N(t)&&delete e.aborts[r]}));const t=e.getState().items[r];i.state===o.FD.FINISHED&&t.completed<100&&e.handleItemProgress(t,100,t.file?t.file.size:0),B[t.state]&&e.trigger(B[t.state],t),N(t)&&(((e,t)=>{e.updateState((e=>{e.batches[t].finishedCounter+=1}))})(e,t.batchId),e.trigger(h.ITEM_FINALIZE,t))}y(e,r)})),(e=>{const t=e.getState();Object.keys(t.batches).forEach((n=>{const{batch:r,finishedCounter:i}=t.batches[n],{orgItemCount:a}=r,s=L(r);a===i&&(s||100===r.completed||(e.updateState((e=>{const t=O(e,n);t.completed=100,t.loaded=t.items.reduce(((e,t)=>{let{loaded:n}=t;return e+n}),0)})),_(e,n,h.BATCH_PROGRESS)),e.updateState((e=>{const t=O(e,n);t.state=s?t.state:o.FG.FINISHED,e.currentBatch===n&&(e.currentBatch=null)})),o.kg.debugLog(`uploady.uploader.batchHelpers: cleaning up batch: ${r.id}`),s||w(e,n,h.BATCH_FINISH),C(e,n),P(e,n))}))})(e),n(e)};const k=v(h.REQUEST_PRE_SEND,(e=>e),((e,t)=>({items:e,options:t}))),G=e=>{let{allowedItems:t,cancelledResults:n,queue:r,items:i,ids:a,next:s}=e;return(t.length?k(r,t):Promise.resolve()).catch((e=>{o.kg.debugLog("uploader.queue: encountered error while preparing items for request",e),((e,t,n,r)=>{const i=n.map((t=>{let{id:n}=t;return{id:n,info:{status:0,state:o.FD.ERROR,response:e}}}));H(t,i,r)})(e,r,i,s)})).then((e=>{let t;return e&&(e.cancelled?n=a.map((()=>!0)):((e,t,n)=>{const{items:r,options:i}=t,a=e.getState().batches[r[0].batchId].batch;let s;try{s=e.sender.send(r,a,i)}catch(e){o.kg.debugLog("uploader.queue: sender failed with unexpected error",e),s={request:Promise.resolve({status:0,state:o.FD.ERROR,response:e.message}),abort:()=>!1,senderType:"exception-handler"}}const{request:u}=s;((e,t,n)=>{e.updateState((e=>{t.forEach((t=>{e.items[t.id].state=o.FD.UPLOADING,e.aborts[t.id]=n.abort}))}))})(e,r,s),u.then((t=>{const o=r.map((e=>({id:e.id,info:t})));H(e,o,n)}))})(r,{items:e.items,options:e.options},s)),((e,t,n,r)=>{const i=n.map(((e,n)=>e?t[n].id:null)).filter(Boolean);if(i.length){const t=i.map((e=>({id:e,info:{status:0,state:o.FD.CANCELLED,response:"cancel"}})));H(e,t,r)}return!!i.length})(r,i,n,s)||(t=s(r)),t}))};const U=(e,t)=>e.getState().activeIds.flat().includes(t),x=e=>{let t;const n=(e=>{const t=e.getState().itemQueue,n=(e=>{const t=e.getState(),n=t.itemQueue,r=t.items;let i=0,a=n[i];for(;a&&(U(e,a)||!F(e,a)||r[a].state!==o.FD.ADDED);)i+=1,a=n[i];return a?i:-1})(e);let r,i=t[n];if(i){const o=T(e,i),a=o.batch.id,s=o.batchOptions.maxGroupSize||0;if(o.batchOptions.grouped&&s>1){r=[];let o=!0;for(;r.length<s&&o;)r.push(i),i=t[n+r.length],o=i&&S(e,i,a)}else r=[i]}return r})(e);if(n){const r=e.getCurrentActiveCount(),{concurrent:i=0,maxConcurrent:a=0}=e.getOptions();(!r||i&&r<a)&&(o.kg.debugLog("uploader.processor: Processing next upload - ",{ids:n,currentCount:r}),t=((e,t)=>{let n;return((e,t)=>{e.updateState((e=>{e.activeIds=e.activeIds.concat(t)}))})(e,t),n=((e,t)=>{const n=D(e,t);return e.getState().currentBatch!==n.id})(e,t[0])?((e,t)=>{const n=D(e,t);return A(e,n).then((t=>{let{cancelled:r}=t;return r||e.updateState((e=>{e.currentBatch=n.id})),!r}))})(e,t[0]).then((n=>{let r=!n;return r&&(((e,t)=>{const n=D(e,t),r=n.id;o.kg.debugLog("uploady.uploader.batchHelpers: cancelling batch: ",{batch:n}),e.updateState((e=>{O(e,r).state=o.FG.CANCELLED})),w(e,r,h.BATCH_CANCEL),C(e,r),P(e,r)})(e,t[0]),x(e)),r})).catch((n=>(o.kg.debugLog("uploader.processor: encountered error while preparing batch for request",n),((e,t,n)=>{const r=D(e,t),i=r.id;o.kg.debugLog("uploady.uploader.batchHelpers: failing batch: ",{batch:r}),e.updateState((e=>{const t=O(e,i);t.state=o.FG.ERROR,t.additionalInfo=n.message})),w(e,i,h.BATCH_ERROR),C(e,i),P(e,i)})(e,t[0],n),x(e),!0))):Promise.resolve(!1),n})(e,n).then((t=>{t||(((e,t,n)=>{const r=e.getState();let o=Object.values(r.items);o=o.filter((e=>!!~t.indexOf(e.id))),Promise.all(o.map((t=>e.runCancellable(h.ITEM_START,t)))).then((r=>{let i=r.map(((t,n)=>t?null:((e,t)=>{const n=t.getState().items[e];return n&&!m.includes(n.state)?n:void 0})(o[n].id,e))).filter(Boolean);return{allowedItems:i,cancelledResults:r,queue:e,items:o,ids:t,next:n}})).then(G)})(e,n,x),i&&x(e))})))}return t};var j=x;const q=(e,t,n)=>(o.kg.debugLog(`uploader.queue: aborting ${t.state} item  - `,t),H(e,[{id:t.id,info:{status:0,state:o.FD.ABORTED,response:"aborted"}}],n),!0),$={[o.FD.UPLOADING]:(e,t)=>(o.kg.debugLog("uploader.queue: aborting uploading item  - ",t),e.getState().aborts[t.id]()),[o.FD.ADDED]:q,[o.FD.PENDING]:q},Y=(e,t,n)=>{const r=e.getState().items[t],o=null==r?void 0:r.state;return!!$[o]&&$[o](e,r,n)};var M=(e,t,n,r,u)=>{const{state:c,update:m}=(e=>{const t={set:(e,r,o)=>(l(n)&&(e[r]=f(o,t)),!0),get:(e,t)=>t===i?p(e):e[t],defineProperty:()=>{throw new Error("Simple State doesnt support defining property")},setPrototypeOf:()=>{throw new Error("Simple State doesnt support setting prototype")},deleteProperty:(e,t)=>(l(n)&&delete e[t],!0)};(0,o.yv)()||s(e)||Object.defineProperty(e,a,{value:{isUpdateable:!1},configurable:!0});const n=(0,o.yv)()?e:f(e,t);return{state:n,update:e=>{if(!(0,o.yv)()&&l(n))throw new Error("Can't call update on State already being updated!");try{d(n,!0),e(n)}finally{d(n,!1)}return n},unwrap:e=>e?p(e):s(n)?p(n):n}})({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),b=()=>c,E=e=>{m(e)},v=e=>{if(c.items[e.id]&&!e.recycled)throw new Error(`Uploader queue conflict - item ${e.id} already exists`);e.recycled&&((e,t)=>{const{previousBatch:n}=t;if(t.recycled&&n&&e.getState().batches[n]){const{id:r}=D(e,t.id);r===n&&e.updateState((e=>{const n=O(e,r),o=n.items.findIndex((e=>{let{id:n}=e;return n===t.id}));~o&&n.items.splice(o,1)}))}})(S,e),E((t=>{t.items[e.id]=e,t.itemQueue.push(e.id)}))},y=(e,n,r)=>{c.items[e.id]&&(E((t=>{const o=t.items[e.id];o.loaded=r,o.completed=n})),t(h.ITEM_PROGRESS,b().items[e.id]))};r.on(g.ITEM_PROGRESS,y),r.on(g.BATCH_PROGRESS,(e=>{var n;const r=null===(n=c.batches[e.id])||void 0===n?void 0:n.batch.items;if(r){const[n,o]=r.reduce(((e,t)=>{let{id:n}=t;const{completed:r,loaded:o}=c.items[n];return e[0]+=r,e[1]+=o,e}),[0,0]);E((t=>{const i=t.batches[e.id].batch;i.completed=n/r.length,i.loaded=o})),t(h.BATCH_PROGRESS,c.batches[e.id].batch)}}));const S={uploaderId:u,getOptions:()=>e,getCurrentActiveCount:()=>c.activeIds.length,getState:b,updateState:E,trigger:t,runCancellable:function(e){if(!(0,o.mf)(n))throw new Error("Uploader queue - cancellable is of wrong type");for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n(e,...r)},sender:r,handleItemProgress:y};return(0,o.Ym)()&&o.kg.isDebugOn()&&(window[`__rpldy_${u}_queue_state`]=S),{updateState:E,getState:S.getState,runCancellable:S.runCancellable,uploadBatch:(e,t)=>{t&&E((n=>{n.batches[e.id].batchOptions=t})),j(S)},addBatch:(e,t)=>(E((n=>{n.batches[e.id]={batch:e,batchOptions:t,finishedCounter:0}})),e.items.forEach(v),O(c,e.id)),abortItem:e=>((e,t,n)=>Y(e,t,n))(S,e,j),abortBatch:e=>{((e,t,n)=>{const r=e.getState().batches[t],i=null==r?void 0:r.batch;i&&!L(i)&&(e.updateState((e=>{O(e,t).state=o.FG.ABORTED})),_(e,t,h.BATCH_ABORT),i.items.forEach((t=>Y(e,t.id,n))))})(S,e,j)},abortAll:()=>{((e,t)=>{const n=e.getState().items;Object.keys(n).forEach((n=>Y(e,n,t))),e.trigger(h.ALL_ABORT)})(S,j)},clearPendingBatches:()=>{(e=>{const t=e.getState().batches;Object.keys(t).filter((e=>t[e].batch.state===o.FG.PENDING)).forEach((t=>{C(e,t),P(e,t)}))})(S)},uploadPendingBatches:e=>{((e,t)=>{e.updateState((e=>{Object.keys(e.batches).forEach((n=>{const r=e.batches[n],{batch:i,batchOptions:a}=r;i.state===o.FG.PENDING&&(i.items.forEach((e=>{e.state=o.FD.ADDED})),i.state=o.FG.ADDED,r.batchOptions=(0,o.TS)({},a,t))}))}))})(S,e),j(S)}}},Z=n("Vmq3");const V=()=>!0,z=(0,o.ZV)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:V,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0,formDataAllowUndefined:!1});var Q=()=>{const{trigger:e,target:t}=(0,r.ZP)({send:(t,n,r)=>{const i=r.destination,a=null==i?void 0:i.url,s=(0,o.P2)((r=>((e,t,n,r)=>{((e,t,n,r)=>{e.forEach((e=>{o.kg.debugLog(`uploady.uploader.processor: file: ${e.id} progress event: loaded(${n}) - completed(${t})`),r(g.ITEM_PROGRESS,e,t,n)}))})(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,r),r(g.BATCH_PROGRESS,t)})(t,n,r,e)),50,!0);return((0,o.mf)(r.send)?r.send:Z.ZP)(t,a,{method:(null==i?void 0:i.method)||r.method||z.method,paramName:(null==i?void 0:i.filesParamName)||r.inputFieldName||"file",params:{...r.params,...null==i?void 0:i.params},forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==i?void 0:i.headers,sendWithFormData:r.sendWithFormData,formatServerResponse:r.formatServerResponse,formDataAllowUndefined:r.formDataAllowUndefined,isSuccessfulCall:r.isSuccessfulCall},s)}},Object.values(g));return t};const W=(0,o.Ym)()&&"FileList"in window,X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;return(0,o.yv)()||(t<3&&s(e)?n=p(e):t<3&&u(e)&&(n=Array.isArray(e)?e.map((e=>X(e,t+1))):Object.keys(e).reduce(((n,r)=>(n[r]=X(e[r],t+1),n)),{}))),n};let J=0;var K=(e,t,n,r)=>{const i=Q(),a=M(n,e,t,i,r);return{process:(e,t)=>{a.uploadBatch(e,t)},abortBatch:e=>{a.abortBatch(e)},abort:e=>{e?a.abortItem(e):a.abortAll()},addNewBatch:(e,t,n)=>((e,t,n)=>{J+=1;const r=`batch-${J}`,i=(e=>W&&e instanceof FileList||"[object FileList]"===e.toString())(e);e=Array.isArray(e)||i?e:[e];const a=!n.autoUpload;return((e,t,n,r)=>Promise.all(Array.prototype.map.call(t,(e=>{const t=(r||V)(e);return(0,o.tI)(t)?t.then((t=>!!t&&e)):!!t&&e}))).then((t=>t.filter(Boolean).map((t=>(0,o.Yc)(t,e,n))))))(r,e,a,n.fileFilter).then((e=>({id:r,uploaderId:t,items:e,state:a?o.FG.PENDING:o.FG.ADDED,completed:0,loaded:0,orgItemCount:e.length,additionalInfo:null})))})(e,t,n).then((e=>a.addBatch(e,n))),runCancellable:a.runCancellable,clearPendingBatches:()=>{a.clearPendingBatches()},processPendingBatches:e=>{a.uploadPendingBatches(e)}}};const ee=Object.values(h);let te=0;var ne=e=>{te+=1;const t=`uploader-${te}`;let n=!1;const i={};o.kg.debugLog(`uploady.uploader: creating new instance (${t})`,{options:e,counter:te});let a=(e=>{return{...z,...e,destination:e&&e.destination?(t=e.destination,{params:{},...t}):null};var t})(e);const s=()=>{f.clearPendingBatches()};let{trigger:u,target:c}=(0,r.ZP)({id:t,update:e=>(a=(0,o.TS)({},a,e),c),add:(e,t)=>{const n=(0,o.TS)({},a,t);return n.clearPendingOnAdd&&s(),f.addNewBatch(e,c.id,n).then((e=>{let t;return e.items.length?t=f.runCancellable(h.BATCH_ADD,e,n).then((t=>{t?(e.state=o.FG.CANCELLED,l(h.BATCH_CANCEL,e)):(o.kg.debugLog(`uploady.uploader [${c.id}]: new items added - auto upload =\n                        ${String(n.autoUpload)}`,e.items),n.autoUpload&&f.process(e))})):o.kg.debugLog(`uploady.uploader: no items to add. batch ${e.id} is empty. check fileFilter if this isn't intended`),t}))},upload:e=>{f.processPendingBatches(e)},abort:e=>{f.abort(e)},abortBatch:e=>{f.abortBatch(e)},getOptions:()=>(0,o.d9)(a),clearPending:s,registerExtension:(e,t)=>{(0,o.kG)(n,"Uploady - uploader extensions can only be registered by enhancers"),(0,o.kG)(!i[e],"Uploady - uploader extension by this name [%s] already exists",e),o.kg.debugLog(`uploady.uploader: registering extension: ${e.toString()}`,t),i[e]=t},getExtension:e=>i[e]},ee,{canAddEvents:!1,canRemoveEvents:!1});const l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const i=(0,r.uZ)((()=>n.map(X)));return u(e,i)},d=(0,o.tq)(l);if(a.enhancer){n=!0;const e=a.enhancer(c,l);n=!1,c=e||c}const f=K(l,d,a,c.id);return(0,o.ZV)(c)},re=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.reduce(((e,t)=>t(e,...r)||e),e)}},oe=ne},DJz1:function(e,t,n){"use strict";n.d(t,{$V:function(){return U},EB:function(){return f},aI:function(){return p},Qn:function(){return d},q5:function(){return b},dP:function(){return m},Ve:function(){return G},Hl:function(){return u},KE:function(){return H},zD:function(){return k},gG:function(){return $},sm:function(){return q},HL:function(){return j},pN:function(){return B},N_:function(){return I},Vu:function(){return E},ns:function(){return S},SY:function(){return A},pQ:function(){return R},XT:function(){return y},G9:function(){return O},hz:function(){return v},zJ:function(){return w},An:function(){return C},A9:function(){return P},LA:function(){return _},h_:function(){return D},UT:function(){return F},J0:function(){return T},fc:function(){return L},LN:function(){return x},IV:function(){return h},uO:function(){return h},zb:function(){return V},GT:function(){return Z}});var r=n("1P8H"),o=n("+TXh"),i=n.n(o),a=n("P2gF");const s=Symbol.for("_rpldy-version_"),u=()=>"0.18.2",c=()=>((0,a.Ym)()?window:process)[s],l="Uploady - Context. File input isn't available",d=(e,t)=>{let n,r,o=!1;t?n=t:a.kg.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");const i=()=>{var e;return null===(e=n)||void 0===e?void 0:e.current},c=()=>{const e=i();(0,a.kG)(e,l),e.removeEventListener("change",c);const t=r;r=null,d(e.files,t)},d=(t,n)=>{e.add(t,n)};return((0,a.Ym)()?window:process)[s]=u(),{hasUploader:()=>!!e,getInternalFileInput:()=>(n&&(o=!0),n),setExternalFileInput:e=>{o=!0,n=e},getIsUsingExternalInput:()=>o,showFileUpload:e=>{const t=i();(0,a.kG)(t,l),r=e,t.removeEventListener("change",c),t.addEventListener("change",c),t.value="",t.click()},upload:d,processPending:t=>{e.upload(t)},clearPending:()=>{e.clearPending()},setOptions:t=>{e.update(t)},getOptions:()=>e.getOptions(),getExtension:t=>e.getExtension(t),abort:t=>{e.abort(t)},abortBatch:t=>{e.abortBatch(t)},on:(t,n)=>e.on(t,n),once:(t,n)=>e.once(t,n),off:(t,n)=>e.off(t,n)}};var f=i().createContext(null),p=e=>((0,a.kG)(!(()=>{const e=c();return!!e&&e!==u()})(),"Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s",c()),(0,a.kG)(e&&e.hasUploader(),"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>"),e),h=()=>p((0,o.useContext)(f));const g=(e,t)=>{const n=h(),{on:r,off:i}=n;(0,o.useEffect)((()=>(r(e,t),()=>{i(e,t)})),[e,t,r,i])},m=(e,t)=>(n,r)=>{const[i,s]=(0,o.useState)(null);n&&!(0,a.mf)(n)&&(r=n,n=void 0);const u=(0,o.useCallback)((function(e){if(!r||e.id===r){for(var o=arguments.length,i=new Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];s(t(e,...i)),(0,a.mf)(n)&&n(e,...i)}}),[n,r]);return g(e,u),i},b=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(n,r)=>{const i=(0,o.useCallback)((function(e){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return!n||t&&r&&e.id!==r?void 0:n(e,...i)}),[n,r]);g(e,i)}},E=b(r.tY.BATCH_ADD,!1),v=b(r.tY.BATCH_START),y=b(r.tY.BATCH_FINISH),S=b(r.tY.BATCH_CANCEL),A=b(r.tY.BATCH_ERROR),R=b(r.tY.BATCH_FINALIZE),I=b(r.tY.BATCH_ABORT),O=m(r.tY.BATCH_PROGRESS,(e=>({...e}))),T=b(r.tY.ITEM_START),D=b(r.tY.ITEM_FINISH),C=b(r.tY.ITEM_CANCEL),P=b(r.tY.ITEM_ERROR),w=b(r.tY.ITEM_ABORT),_=b(r.tY.ITEM_FINALIZE),F=m(r.tY.ITEM_PROGRESS,(e=>({...e}))),L=b(r.tY.REQUEST_PRE_SEND,!1),B=b(r.tY.ALL_ABORT,!1),N=Symbol.for("rpldy_component"),H=(e,t)=>{(0,a.yv)()||e||console.warn(t)},k=e=>{e[N]=!0},G=e=>{var t,n;return!0===e[N]||!0===(null===(t=e.target)||void 0===t?void 0:t[N])||!0===(null===(n=e.render)||void 0===n?void 0:n[N])};var U=e=>{const{listeners:t,debug:n,children:s,inputRef:u,...c}=e;a.kg.setDebug(!!n),a.kg.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);const l=((e,t)=>{const n=(0,o.useMemo)((()=>(a.kg.debugLog("Uploady creating a new uploader instance",e),(0,r.ZP)(e))),[e.enhancer]);return n.update(e),(0,o.useEffect)((()=>(t&&(a.kg.debugLog("Uploady setting event listeners",t),Object.entries(t).forEach((e=>{let[t,r]=e;n.on(t,r)}))),()=>{t&&(a.kg.debugLog("Uploady removing event listeners",t),Object.entries(t).forEach((e=>{let[t,r]=e;return n.off(t,r)})))})),[t,n]),n})(c,t),p=(0,o.useMemo)((()=>d(l,u)),[l,u]);return i().createElement(f.Provider,{value:p},s)},x=e=>{const t=h();return e&&t.setOptions(e),t.getOptions()},j=()=>{const e=h();return(0,o.useCallback)((t=>e.abort(t)),[e])},q=()=>{const e=h();return(0,o.useCallback)((t=>e.abortBatch(t)),[e])},$=()=>{const e=h();return(0,o.useCallback)((()=>e.abort()),[e])},Y=n("Z1CE");const M=e=>{let{eventType:t,getIsValidEventData:n,getRequestData:r}=e;return e=>a=>{const s=h(),[u,c]=(0,o.useState)({updateRequest:null,requestData:null}),{id:l}=a;return(0,o.useLayoutEffect)((()=>{const e=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return!0===n(l,...i)?new Promise((n=>{c({updateRequest:r=>{s.off(t,e),n(r)},requestData:r(...i)})})):void 0};return l&&s.on(t,e),()=>{l&&s.off(t,e)}}),[s,l]),i().createElement(e,(0,Y.Z)({},a,u))}};var Z=M({eventType:r.tY.REQUEST_PRE_SEND,getIsValidEventData:(e,t)=>{let{items:n}=t;return!!n.find((t=>t.id===e))},getRequestData:e=>{let{items:t,options:n}=e;return{items:t,options:n}}}),V=M({eventType:r.tY.BATCH_START,getIsValidEventData:(e,t)=>t.id===e,getRequestData:(e,t)=>({batch:e,items:e.items,options:t})})},"LC/c":function(e,t,n){"use strict";n.r(t),n.d(t,{BATCH_STATES:function(){return h.FG},DEFAULT_OPTIONS:function(){return h.WN},FILE_STATES:function(){return h.FD},MissingUrlError:function(){return h.PF},NoDomUploady:function(){return c.$V},UPLOADER_EVENTS:function(){return h.tY},Uploady:function(){return f},UploadyContext:function(){return c.EB},XHR_SENDER_TYPE:function(){return h.Ch},assertContext:function(){return c.aI},composeEnhancers:function(){return h.fZ},createContextApi:function(){return c.Qn},createUploader:function(){return h._s},default:function(){return g},generateUploaderEventHook:function(){return c.q5},generateUploaderEventHookWithState:function(){return c.dP},getIsUploadOptionsComponent:function(){return c.Ve},getUploadyVersion:function(){return c.Hl},getXhrSend:function(){return h.KZ},logWarning:function(){return c.KE},markAsUploadOptionsComponent:function(){return c.zD},send:function(){return h.lW},useAbortAll:function(){return c.gG},useAbortBatch:function(){return c.sm},useAbortItem:function(){return c.HL},useAllAbortListener:function(){return c.pN},useBatchAbortListener:function(){return c.N_},useBatchAddListener:function(){return c.Vu},useBatchCancelledListener:function(){return c.ns},useBatchErrorListener:function(){return c.SY},useBatchFinalizeListener:function(){return c.pQ},useBatchFinishListener:function(){return c.XT},useBatchProgressListener:function(){return c.G9},useBatchStartListener:function(){return c.hz},useFileInput:function(){return p},useItemAbortListener:function(){return c.zJ},useItemCancelListener:function(){return c.An},useItemErrorListener:function(){return c.A9},useItemFinalizeListener:function(){return c.LA},useItemFinishListener:function(){return c.h_},useItemProgressListener:function(){return c.UT},useItemStartListener:function(){return c.J0},useRequestPreSend:function(){return c.fc},useUploadOptions:function(){return c.LN},useUploady:function(){return c.IV},useUploadyContext:function(){return c.uO},withBatchStartUpdate:function(){return c.zb},withRequestPreSendUpdate:function(){return c.GT}});var r=n("Z1CE"),o=n("+TXh"),i=n.n(o),a=n("XYNb"),s=n.n(a),u=n("P2gF"),c=n("DJz1");const l=(e,t,n)=>i().createElement("input",(0,r.Z)({},e,{name:t.inputFieldName,type:"file",ref:n})),d=(0,o.memo)((0,o.forwardRef)(((e,t)=>{let{container:n,noPortal:r,...o}=e;const i=(0,c.LN)(),a=n&&1===n.nodeType;return(0,u.kG)(a||!(0,u.Ym)(),"Uploady - Container for file input must be a valid dom element"),r?l(o,i,t):((e,t,n,r,o)=>e&&t?s().createPortal(l(n,r,o),e):null)(n,a,o,i,t)})));var f=e=>{const{multiple:t=!0,capture:n,accept:a,webkitdirectory:s,children:l,inputFieldContainer:f,customInput:p,fileInputId:h,noPortal:g=!1,...m}=e,b=p?null:f||((0,u.Ym)()?document.body:null),E=(0,o.useRef)();return i().createElement(c.$V,(0,r.Z)({},m,{inputRef:E}),p?null:i().createElement(d,{container:b,multiple:t,capture:n,accept:a,webkitdirectory:s,style:{display:"none"},ref:E,id:h,noPortal:g}),l)};var p=e=>{const t=(0,c.uO)();return e&&t.setExternalFileInput(e),(0,o.useEffect)((()=>{if(null!=e&&e.current&&"closest"in e.current){const n=e.current,r=t.getOptions();if(!r.destination||!r.destination.url){const e=(e=>{const t=e.closest("form");let n={filesParamName:e.getAttribute("name"),method:void 0,url:void 0};if(t){const e=t.getAttribute("method"),r=(e=>{const t=window.location;let n,r=e.getAttribute("action")||"";switch(r=r.replace(/\s/g,""),!0){case""===r:r=t.href;break;case r.startsWith("/"):r=`${t.protocol}//${t.host}${r}`;break;case!/:\/\//.test(r):n=t.pathname.split("/").slice(0,-1).concat("").join("/"),r=`${t.protocol}//${t.host}${n}${r}`}return r})(t);n.method=e?e.toUpperCase():void 0,n.url=r,u.kg.debugLog(`Uploady.useFileInput: using custom input's parent form url ${n.url} and method ${n.method||""}`)}return n})(n);t.setOptions({destination:e})}}}),[e,t]),e||t.getInternalFileInput()},h=n("1P8H"),g=f},"+TXh":function(t){"use strict";t.exports=e},XYNb:function(e){"use strict";e.exports=t}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.m=r,n=[],i.O=function(e,t,r,o){if(!t){var a=1/0;for(l=0;l<n.length;l++){t=n[l][0],r=n[l][1],o=n[l][2];for(var s=!0,u=0;u<t.length;u++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](t[u])}))?t.splice(u--,1):(s=!1,o<a&&(a=o));if(s){n.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var l=n.length;l>0&&n[l-1][2]>o;l--)n[l]=n[l-1];n[l]=[t,r,o]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={456:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,a=n[0],s=n[1],u=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(u)var l=u(i)}for(t&&t(n);c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(l)},n=self.webpackChunkrpldy=self.webpackChunkrpldy||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),i.O(void 0,[429],(function(){return i("SKjz")})),i.O(void 0,[429],(function(){return i("P2gF")})),i.O(void 0,[429],(function(){return i("Vmq3")})),i.O(void 0,[429],(function(){return i("1P8H")})),i.O(void 0,[429],(function(){return i("DJz1")}));var a=i.O(void 0,[429],(function(){return i("LC/c")}));return i.O(a)}()}));
//# sourceMappingURL=rpldy-ui-core.umd.min.js.map