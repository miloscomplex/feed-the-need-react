"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isItemBelongsToBatch = exports.finalizeItem = void 0;

const finalizeItem = function (queue, id) {
  let delItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  const state = queue.getState();
  const index = state.itemQueue.indexOf(id);

  if (~index) {
    queue.updateState(state => {
      if (delItem) {
        delete state.items[id];
      }

      state.itemQueue.splice(index, 1);
      const activeIndex = state.activeIds.indexOf(id);

      if (~activeIndex) {
        state.activeIds.splice(activeIndex, 1);
      }
    });
  }
};

exports.finalizeItem = finalizeItem;

const isItemBelongsToBatch = (queue, itemId, batchId) => queue.getState().items[itemId].batchId === batchId;

exports.isItemBelongsToBatch = isItemBelongsToBatch;